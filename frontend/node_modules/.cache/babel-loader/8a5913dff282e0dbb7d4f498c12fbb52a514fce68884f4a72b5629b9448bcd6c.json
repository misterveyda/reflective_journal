{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import JournalEntries from'./components/JournalEntries';import JournalForm from'./components/JournalForm';import Login from'./components/Login';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[entries,setEntries]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{const token=localStorage.getItem('token');if(token){setIsAuthenticated(true);fetchEntries();}},[]);const fetchEntries=async()=>{setLoading(true);try{const token=localStorage.getItem('token');const response=await fetch('/api/entries/',{headers:{'Authorization':\"Token \".concat(token)}});if(response.ok){const data=await response.json();setEntries(data.results||data);}}catch(error){console.error('Error fetching entries:',error);}finally{setLoading(false);}};const handleLogin=token=>{localStorage.setItem('token',token);setIsAuthenticated(true);fetchEntries();};const handleLogout=()=>{localStorage.removeItem('token');setIsAuthenticated(false);setEntries([]);};const handleEntryCreated=newEntry=>{setEntries([newEntry,...entries]);};if(!isAuthenticated){return/*#__PURE__*/_jsx(Login,{onLogin:handleLogin});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u2728 Reflective Journal\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(JournalForm,{onEntryCreated:handleEntryCreated}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(JournalEntries,{entries:entries})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","JournalEntries","JournalForm","Login","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","entries","setEntries","loading","setLoading","token","localStorage","getItem","fetchEntries","response","fetch","headers","concat","ok","data","json","results","error","console","handleLogin","setItem","handleLogout","removeItem","handleEntryCreated","newEntry","onLogin","className","children","onClick","onEntryCreated"],"sources":["/workspaces/reflective_journal/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport JournalEntries from './components/JournalEntries';\nimport JournalForm from './components/JournalForm';\nimport Login from './components/Login';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [entries, setEntries] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      setIsAuthenticated(true);\n      fetchEntries();\n    }\n  }, []);\n\n  const fetchEntries = async () => {\n    setLoading(true);\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('/api/entries/', {\n        headers: {\n          'Authorization': `Token ${token}`,\n        },\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setEntries(data.results || data);\n      }\n    } catch (error) {\n      console.error('Error fetching entries:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogin = (token) => {\n    localStorage.setItem('token', token);\n    setIsAuthenticated(true);\n    fetchEntries();\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setIsAuthenticated(false);\n    setEntries([]);\n  };\n\n  const handleEntryCreated = (newEntry) => {\n    setEntries([newEntry, ...entries]);\n  };\n\n  if (!isAuthenticated) {\n    return <Login onLogin={handleLogin} />;\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>âœ¨ Reflective Journal</h1>\n        <button onClick={handleLogout} className=\"logout-btn\">Logout</button>\n      </header>\n      <main className=\"container\">\n        <JournalForm onEntryCreated={handleEntryCreated} />\n        {loading ? <p>Loading...</p> : <JournalEntries entries={entries} />}\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}